<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç¨ Candy Crush - Gh√©p K·∫πo</title>
    <link rel="stylesheet" href="candy-crush.css">
</head>

<body>
    <div class="game-container">
        <!-- Header -->
        <div class="game-header">
            <button class="back-btn" onclick="goBack()">‚Üê Quay l·∫°i</button>
            <h1>üç¨ Gh√©p K·∫πo Ng·ªçt</h1>
            <button class="reset-btn" onclick="resetGame()">üîÑ Ch∆°i l·∫°i</button>
        </div>

        <!-- Game Info -->
        <div class="game-info">
            <div class="info-item">
                <div class="info-label">ƒêi·ªÉm</div>
                <div class="info-value" id="candyScore">0</div>
            </div>
            <div class="info-item">
                <div class="info-label">N∆∞·ªõc</div>
                <div class="info-value" id="candyMoves">30</div>
            </div>
            <div class="info-item">
                <div class="info-label">M·ª•c ti√™u</div>
                <div class="info-value">1000</div>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-label">Ti·∫øn ƒë·ªô</div>
            <div class="progress-bg">
                <div class="progress-bar" id="candyProgress"></div>
            </div>
        </div>

        <!-- Game Board -->
        <div class="board-container">
            <canvas id="candyCanvas" width="480" height="480"></canvas>
        </div>

        <!-- Instructions -->
        <div class="instructions">
            <p>üëÜ Click 2 k·∫πo li·ªÅn k·ªÅ ƒë·ªÉ ƒë·ªïi ch·ªó</p>
            <p>üéØ Gh√©p 3 k·∫πo gi·ªëng nhau ƒë·ªÉ n·ªï!</p>
            <p>‚≠ê Gh√©p nhi·ªÅu h∆°n = ƒëi·ªÉm cao h∆°n!</p>
        </div>
    </div>

    <script src="candy-crush-complete.js"></script>
    <script>
        let game = null;

        // Kh·ªüi t·∫°o game complete v·ªõi special candies
        window.addEventListener('load', function () {
            if (window.CandyCrushComplete) {
                game = new window.CandyCrushComplete();
                game.init('candyCanvas');

                // Setup click handler
                const canvas = document.getElementById('candyCanvas');
                if (canvas) {
                    canvas.onclick = function (e) {
                        const rect = canvas.getBoundingClientRect();
                        const x = e.clientX - rect.left;
                        const y = e.clientY - rect.top;
                        game.handleClick(x, y);
                    };

                    // Touch support
                    canvas.ontouchstart = function (e) {
                        e.preventDefault();
                        const rect = canvas.getBoundingClientRect();
                        const touch = e.touches[0];
                        const x = touch.clientX - rect.left;
                        const y = touch.clientY - rect.top;
                        game.handleClick(x, y);
                    };
                }

                console.log('üç¨ Candy Crush Complete ready!');
                console.log('‚ú® Try to match 4 for Striped Candy!');
                console.log('‚ú® Try to match 5 for Color Bomb!');
            }
        });

        function goBack() {
            window.location.href = 'index.html';
        }

        function resetGame() {
            if (game) {
                game.reset();
            }
        }
    </script>
</body>

</html>